(function(){var e=function(t,n){var r=e.resolve(t,n||"/"),i=e.modules[r];if(!i)throw new Error("Failed to resolve module "+t+", tried "+r);var s=i._cached?i._cached:i();return s};e.paths=[],e.modules={},e.extensions=[".js",".coffee"],e._core={assert:!0,events:!0,fs:!0,path:!0,vm:!0},e.resolve=function(){return function(t,n){function u(t){if(e.modules[t])return t;for(var n=0;n<e.extensions.length;n++){var r=e.extensions[n];if(e.modules[t+r])return t+r}}function a(t){t=t.replace(/\/+$/,"");var n=t+"/package.json";if(e.modules[n]){var i=e.modules[n](),s=i.browserify;if(typeof s=="object"&&s.main){var o=u(r.resolve(t,s.main));if(o)return o}else if(typeof s=="string"){var o=u(r.resolve(t,s));if(o)return o}else if(i.main){var o=u(r.resolve(t,i.main));if(o)return o}}return u(t+"/index")}function f(e,t){var n=l(t);for(var r=0;r<n.length;r++){var i=n[r],s=u(i+"/"+e);if(s)return s;var o=a(i+"/"+e);if(o)return o}var s=u(e);if(s)return s}function l(e){var t;e==="/"?t=[""]:t=r.normalize(e).split("/");var n=[];for(var i=t.length-1;i>=0;i--){if(t[i]==="node_modules")continue;var s=t.slice(0,i+1).join("/")+"/node_modules";n.push(s)}return n}n||(n="/");if(e._core[t])return t;var r=e.modules.path();n=r.resolve("/",n);var i=n||"/";if(t.match(/^(?:\.\.?\/|\/)/)){var s=u(r.resolve(i,t))||a(r.resolve(i,t));if(s)return s}var o=f(t,i);if(o)return o;throw new Error("Cannot find module '"+t+"'")}}(),e.alias=function(t,n){var r=e.modules.path(),i=null;try{i=e.resolve(t+"/package.json","/")}catch(s){i=e.resolve(t,"/")}var o=r.dirname(i),u=(Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t})(e.modules);for(var a=0;a<u.length;a++){var f=u[a];if(f.slice(0,o.length+1)===o+"/"){var l=f.slice(o.length);e.modules[n+l]=e.modules[o+l]}else f===o&&(e.modules[n]=e.modules[o])}},e.define=function(t,n){var r=e._core[t]?"":e.modules.path().dirname(t),i=function(t){return e(t,r)};i.resolve=function(t){return e.resolve(t,r)},i.modules=e.modules,i.define=e.define;var s={exports:{}};e.modules[t]=function(){return e.modules[t]._cached=s.exports,n.call(s.exports,i,s,s.exports,r,t),e.modules[t]._cached=s.exports,s.exports}},typeof process=="undefined"&&(process={}),process.nextTick||(process.nextTick=function(){var e=[],t=typeof window!="undefined"&&window.postMessage&&window.addEventListener;return t&&window.addEventListener("message",function(t){if(t.source===window&&t.data==="browserify-tick"){t.stopPropagation();if(e.length>0){var n=e.shift();n()}}},!0),function(n){t?(e.push(n),window.postMessage("browserify-tick","*")):setTimeout(n,0)}}()),process.title||(process.title="browser"),process.binding||(process.binding=function(t){if(t==="evals")return e("vm");throw new Error("No such module")}),process.cwd||(process.cwd=function(){return"."}),process.env||(process.env={}),process.argv||(process.argv=[]),e.define("path",function(e,t,n,r,i){function s(e,t){var n=[];for(var r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}function o(e,t){var n=0;for(var r=e.length;r>=0;r--){var i=e[r];i=="."?e.splice(r,1):i===".."?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}var u=/^(.+\/(?!$)|\/)?((?:.+?)?(\.[^.]*)?)$/;n.resolve=function(){var e="",t=!1;for(var n=arguments.length;n>=-1&&!t;n--){var r=n>=0?arguments[n]:process.cwd();if(typeof r!="string"||!r)continue;e=r+"/"+e,t=r.charAt(0)==="/"}return e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},n.normalize=function(e){var t=e.charAt(0)==="/",n=e.slice(-1)==="/";return e=o(s(e.split("/"),function(e){return!!e}),!t).join("/"),!e&&!t&&(e="."),e&&n&&(e+="/"),(t?"/":"")+e},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(s(e,function(e,t){return e&&typeof e=="string"}).join("/"))},n.dirname=function(e){var t=u.exec(e)[1]||"",n=!1;return t?t.length===1||n&&t.length<=3&&t.charAt(1)===":"?t:t.substring(0,t.length-1):"."},n.basename=function(e,t){var n=u.exec(e)[2]||"";return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return u.exec(e)[3]||""}}),e.define("/lib/schema.js",function(e,t,n,r,i){var s=e("./Schema"),o=t.exports=function(e){var t,n;arguments.length===2&&(t=e,e=arguments[1]);if(this instanceof o){var r=s.extend(e);return n=new r,t&&(n.doc=t),n.wrap()}return n=s.fromJS(e),o.self.resolve(n),t&&(n.doc=t),n.wrap()};o.Schema=s,o.toJSON=function(e){return s.fromJS(e).toJSON()},o.fromJS=function(e){return s.fromJS(e).wrap()},o.fromJSON=function(e){return s.fromJSON(e).wrap()}}),e.define("/lib/Schema.js",function(e,t,n,r,i){function u(e){return function(){if(o)return e.apply(this,arguments);o=!0;var t=e.apply(this,arguments);for(var n in u)delete u[n];return o=!1,t}}function a(e,t){var n=e.length,r;while(n--){r=e[n](t);if(r!=null)return r}}var s=t.exports=function(){};s.prototype={wrap:function(){if(this.wrapped)return this.validate;this.wrapped=!0;var e=["toJSON","unwrap"];e=e.concat(this.publicFunctions||[]);for(var t=0;t<e.length;t++){if(!this[e[t]])continue;this.validate[e[t]]=this[e[t]].bind(this)}return this.validate},unwrap:function(){return this},toJSON:u(function(e){var t,n=s.session;n.serialized||(n.serialized={objects:[],jsons:[],ids:[]});var r=n.serialized.objects.indexOf(this);if(e&&r!==-1){t=n.serialized.jsons[r];if(t.id==null){do t.id="id-"+Math.floor(Math.random()*1e5);while(n.serialized.ids.indexOf(t.id)!==-1);n.serialized.ids.push(t.id)}t={$ref:t.id}}else t={},this.doc!=null&&(t.description=this.doc),n.serialized.objects.push(this),n.serialized.jsons.push(t);return t})},s.extend=function(e){if(!e.validate)throw new Error("Schema objects must have a validate function.");var t=function(){this.initialize&&this.initialize.apply(this,arguments),this.validate=this.validate.bind(this),this.validate.schema=this.validate},n=Object.create(s.prototype);for(var r in e)n[r]=e[r];return t.prototype=n,t};var o=!1;s.session=u;var f=[];s.fromJS=a.bind(null,f),s.fromJS.def=Array.prototype.push.bind(f);var l=[];s.fromJSON=u(a.bind(null,l)),s.fromJSON.def=Array.prototype.push.bind(l),s.patterns={},s.extensions={}}),e.define("/lib/patterns/reference.js",function(e,t,n,r,i){var s=e("../Schema"),o=t.exports=s.patterns.ReferenceSchema=s.extend({initialize:function(e){this.value=e},validate:function(e){return e===this.value},toJSON:function(){var e=s.prototype.toJSON.call(this);return e["enum"]=[this.value],e}});s.fromJS.def(function(e){return new o(e)})}),e.define("/lib/patterns/nothing.js",function(e,t,n,r,i){var s=e("../Schema"),o=t.exports=s.patterns.NothingSchema=s.extend({validate:function(e){return e==null},toJSON:function(){return{type:"null"}}}),u=o.instance=new o;s.fromJS.def(function(e){if(e===null)return u}),s.fromJSON.def(function(e){if(e.type==="null")return u})}),e.define("/lib/patterns/anything.js",function(e,t,n,r,i){var s=e("../Schema"),o=t.exports=s.patterns.AnythingSchema=s.extend({validate:function(e){return e!=null},toJSON:function(){return{type:"any"}}}),u=o.instance=new o;s.fromJS.def(function(e){if(e===undefined)return u}),s.fromJSON.def(function(e){if(e.type==="any")return u})}),e.define("/lib/patterns/object.js",function(e,t,n,r,i){var s=e("../Schema"),o=e("./anything").instance,u=e("./nothing").instance,a=t.exports=s.patterns.ObjectSchema=s.extend({initialize:function(e,t){var n=this;this.other=t||o,this.properties=e||[],this.stringProps={},this.regexpProps=[],this.properties.forEach(function(e){typeof e.key=="string"?n.stringProps[e.key]=e:n.regexpProps.push(e)})},validate:function(e){var t=this;if(e==null)return!1;var n=Object.keys(this.stringProps).every(function(n){return t.stringProps[n].min===0&&!(n in e)||t.stringProps[n].value.validate(e[n])});if(!n)return!1;if(!this.regexpProps.length&&this.other===o)return!0;var r;for(var i in e){r=!1;var s=Object.keys(this.regexpProps).every(function(n){return!t.regexpProps[n].key.test(n)||(r=!0)&&t.regexpProps[n].value.validate(e[n])});if(!s)return!1;if(!r&&!(i in this.stringProps)&&!this.other.validate(e[i]))return!1}return!0},toJSON:s.session(function(){var e,t,n,r=s.prototype.toJSON.call(this,!0);if(r["$ref"]!=null)return r;r.type="object";for(e in this.stringProps)t=this.stringProps[e],r.properties=r.properties||{},r.properties[t.key]=t.value.toJSON(),t.min===1&&(r.properties[t.key].required=!0),t.title&&(r.properties[t.key].title=t.title);for(e=0;e<this.regexpProps.length;e++)t=this.regexpProps[e],r.patternProperties=r.patternProperties||{},n=t.key.toString(),n=n.substr(2,n.length-4),r.patternProperties[n]=t.value.toJSON(),t.title&&(r.patternProperties[n].title=t.title);return this.other!==o&&(r.additionalProperties=this.other===u?!1:this.other.toJSON()),r})}),f=function(){var e="[](){}^$?*+.".split("").map(function(e){return RegExp("(\\\\)*\\"+e,"g")}),t="bBwWdDsS".split("").map(function(e){return RegExp("(\\\\)*"+e,"g")});return function(n){var r,i,s;for(r=0;r<e.length;r++){s=n.match(e[r]);if(!s)continue;for(i=0;i<s.length;i++)if(s[i].length%2===1)return RegExp("^"+n+"$")}for(r=0;r<t.length;r++){s=n.match(t[r]);if(!s)continue;for(i=0;i<s.length;i++)if(s[i].length%2===0)return RegExp("^"+n+"$")}for(r=0;r<e.length;r++)n=n.replace(e[r],function(e){return e.substr(1)});return n}}();s.fromJS.def(function(e){if(e instanceof Object){var t,n,r=[];for(var i in e){n={value:s.fromJS(e[i])};if(i==="*"){t=n.value;continue}n.min=i[0]==="*"||i[0]==="?"?0:1,n.max=i[0]==="*"||i[0]==="+"?Infinity:1,i=i.replace(/^[*?+]/,""),i=i.replace(/\s*:[^:]+$/,function(e){return n.title=e.replace(/^\s*:\s*/,""),""}),n.key=f(i),r.push(n)}return new a(r,t)}return}),s.fromJSON.def(function(e){if(!e||e.type!=="object")return;var t,n=[];for(t in e.properties)n.push({min:e.properties[t].required?1:0,max:1,key:t,value:s.fromJSON(e.properties[t]),title:e.properties[t].title});for(t in e.patternProperties)n.push({min:0,max:Infinity,key:RegExp("^"+t+"$"),value:s.fromJSON(e.patternProperties[t]),title:e.patternProperties[t].title});var r;return e.additionalProperties!==undefined&&(r=e.additionalProperties===!1?u:s.fromJSON(e.additionalProperties)),new a(n,r)})}),e.define("/lib/patterns/or.js",function(e,t,n,r,i){var s=e("../Schema"),o=e("../patterns/equality"),u=t.exports=s.patterns.OrSchema=s.extend({initialize:function(e){this.schemas=e},validate:function(e){return this.schemas.some(function(t){return t.validate(e)})},toJSON:s.session(function(){var e=s.prototype.toJSON.call(this,!0),t=this.schemas.map(function(e){return e.toJSON()}),n=t.every(function(e){return e["enum"]instanceof Array&&e["enum"].length===1});return e["$ref"]!=null?e:(n?e["enum"]=t.map(function(e){return e["enum"][0]}):e.type=t.map(function(e){var t=typeof e.type=="string"&&Object.keys(e).length===1;return t?e.type:e}),e)})});s.fromJS.def(function(e){if(e instanceof Array)return new u(e.map(function(e){return e===undefined?s.self:s.fromJS(e)}))}),s.fromJSON.def(function(e){if(!e)return;if(e["enum"]instanceof Array)return new u(e["enum"].map(function(e){return new o(e)}));if(e.type instanceof Array)return new u(e.type.map(function(e){return s.fromJSON(typeof e=="string"?{type:e}:e)}))})}),e.define("/lib/patterns/equality.js",function(e,t,n,r,i){var s=e("../Schema"),o=function(e,t){if(Object(e)!==e||Object(t)!==t)return e===t;if(e instanceof Array!=t instanceof Array)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(!o(e[n],t[n]))return!1;return!0},u=t.exports=s.patterns.EqualitySchema=s.extend({initialize:function(e){this.object=e},validate:function(e){return o(e,this.object)},toJSON:function(){var e=s.prototype.toJSON.call(this);return e["enum"]=[this.object],e}});s.fromJS.def(function(e){if(e instanceof Array&&e.length===1)return new u(e[0])})}),e.define("/lib/patterns/regexp.js",function(e,t,n,r,i){var s=e("../Schema"),o=t.exports=s.patterns.RegexpSchema=s.extend({initialize:function(e){this.regexp=e},validate:function(e){return Object(e)instanceof String&&(!this.regexp||this.regexp.test(e))},toJSON:function(){var e=s.prototype.toJSON.call(this);return e.type="string",this.regexp&&(e.pattern=this.regexp.toString(),e.pattern=e.pattern.substr(1,e.pattern.length-2)),e}});s.fromJSON.def(function(e){if(!e||e.type!=="string")return;return"pattern"in e?new o(RegExp("^"+e.pattern+"$")):"minLength"in e||"maxLength"in e?new o(RegExp("^.{"+[e.minLength||0,e.maxLength].join(",")+"}$")):new o}),s.fromJS.def(function(e){if(e instanceof RegExp)return new o(e)})}),e.define("/lib/patterns/class.js",function(e,t,n,r,i){var s=e("../Schema"),o=t.exports=s.patterns.ClassSchema=s.extend({initialize:function(e){this.constructor=e},validate:function(e){return e instanceof this.constructor}});s.fromJS.def(function(e){if(e instanceof Function)return e.schema instanceof Function?e.schema.unwrap():new o(e);return})}),e.define("/lib/patterns/schema.js",function(e,t,n,r,i){var s=e("../Schema");s.fromJS.def(function(e){if(e instanceof s)return e})}),e.define("/lib/extensions/Boolean.js",function(e,t,n,r,i){var s=e("../Schema"),o=t.exports=s.extensions.BooleanSchema=new s.extend({validate:function(e){return Object(e)instanceof Boolean},toJSON:function(){return{type:"boolean"}}}),u=t.exports=(new o).wrap();s.fromJSON.def(function(e){if(!e||e.type!=="boolean")return;return u}),Boolean.schema=u}),e.define("/lib/extensions/Number.js",function(e,t,n,r,i){var s=e("../Schema"),o=t.exports=s.extensions.NumberSchema=s.extend({initialize:function(e,t,n,r,i){this.minimum=e!=null?e:-Infinity,this.exclusiveMinimum=t,this.maximum=e!=null?n:Infinity,this.exclusiveMaximum=r,this.divisibleBy=i||0},min:function(e){return(new o(e,!1,this.maximum,this.exclusiveMaximum,this.divisibleBy)).wrap()},above:function(e){return(new o(e,!0,this.maximum,this.exclusiveMaximum,this.divisibleBy)).wrap()},max:function(e){return(new o(this.minimum,this.exclusiveMinimum,e,!1,this.divisibleBy)).wrap()},below:function(e){return(new o(this.minimum,this.exclusiveMinimum,e,!0,this.divisibleBy)).wrap()},step:function(e){return(new o(this.minimum,this.exclusiveMinimum,this.maximum,this.exclusiveMaximum,e)).wrap()},publicFunctions:["min","above","max","below","step"],validate:function(e){return Object(e)instanceof Number&&(this.exclusiveMinimum?e>this.minimum:e>=this.minimum)&&(this.exclusiveMaximum?e<this.maximum:e<=this.maximum)&&(this.divisibleBy===0||e%this.divisibleBy===0)},toJSON:function(){var e=s.prototype.toJSON.call(this);return e.type=this.divisibleBy!==0&&this.divisibleBy%1===0?"integer":"number",this.divisibleBy!==0&&this.divisibleBy!==1&&(e.divisibleBy=this.divisibleBy),this.minimum!==-Infinity&&(e.minimum=this.minimum,this.exclusiveMinimum===!0&&(e.exclusiveMinimum=!0)),this.maximum!==Infinity&&(e.maximum=this.maximum,this.exclusiveMaximum===!0&&(e.exclusiveMaximum=!0)),e}});s.fromJSON.def(function(e){if(!e||e.type!=="number"&&e.type!=="integer")return;return new o(e.minimum,e.exclusiveMinimum,e.maximum,e.exclusiveMaximum,e.divisibleBy||(e.type==="integer"?1:0))}),Number.schema=(new o).wrap(),Number.min=Number.schema.min,Number.above=Number.schema.above,Number.max=Number.schema.max,Number.below=Number.schema.below,Number.step=Number.schema.step,Number.Integer=Number.step(1)}),e.define("/lib/extensions/String.js",function(e,t,n,r,i){var s=e("../patterns/regexp");String.of=function(){var e=Array.prototype.reverse.call(arguments),t=e[0]?"["+e[0]+"]":"[a-zA-Z0-9]",n=e[1],r=e.length>2?e[2]:e[1],i="^"+t+"{"+(r||0)+","+(n||"")+"}$";return(new s(RegExp(i))).wrap()},String.schema=(new s).wrap()}),e.define("/lib/extensions/Object.js",function(e,t,n,r,i){var s=e("../patterns/reference"),o=e("../patterns/equality"),u=e("../patterns/object");Object.like=function(e){return(new o(e)).wrap()},Object.reference=function(e){return(new s(e)).wrap()},Object.schema=(new u).wrap()}),e.define("/lib/extensions/Array.js",function(e,t,n,r,i){var s=e("../Schema"),o=e("../patterns/equality"),u=e("../patterns/anything").instance,a=t.exports=s.extensions.ArraySchema=s.extend({initialize:function(e,t,n){this.itemSchema=e||u,this.min=n||0,this.max=t||Infinity},validate:function(e){if(e instanceof Array){if(this.min===this.max){if(e.length!==this.min)return!1}else{if(this.min>0&&e.length<this.min)return!1;if(this.max<Infinity&&e.length>this.max)return!1}for(var t=0;t<e.length;t++)if(!this.itemSchema.validate(e[t]))return!1;return!0}return!1},toJSON:s.session(function(){var e=s.prototype.toJSON.call(this,!0);return e["$ref"]!=null?e:(e.tpye="array",this.min>0&&(e.minItems=this.min),this.max<Infinity&&(e.maxItems=this.max),this.itemSchema!==u&&(e.items=this.itemSchema.toJSON()),e)})});s.fromJSON.def(function(e){if(!e||e.type!=="array")return;if(e.items instanceof Array)return;return new a(s.fromJSON(e.items),e.maxItems,e.minItems)}),Array.of=function(){var e=Array.prototype.reverse.call(arguments);return e.length===2&&(e[2]=e[1]),new a(s.fromJS(e[0]),e[1],e[2])},Array.like=function(e){return(new o(e)).wrap()},Array.schema=(new a).wrap()}),e.define("/lib/extensions/Function.js",function(e,t,n,r,i){var s=e("../patterns/reference");Function.reference=function(e){return(new s(e)).wrap()}}),e.define("/lib/extensions/Schema.js",function(e,t,n,r,i){function a(e){return e.resolve=function(){return s.self=o.self=a(new u),u.prototype.resolve.apply(this,arguments)},e}var s=e("../Schema"),o=e("../schema"),u=t.exports=s.extensions.SchemaReference=s.extend({validate:function(){throw new Error("Trying to validate unresolved schema reference.")},resolve:function(e){var t=s.fromJS(e);for(var n in t)t[n]instanceof Function?this[n]=t[n].bind(t):this[n]=t[n];delete this.resolve},publicFunctions:["resolve"]});o.reference=function(e){return new u},s.self=o.self=a(new u),s.fromJSON.def(function(e){if(e.id==null&&e["$ref"]==null)return;var t,n=s.session;n.deserialized||(n.deserialized={references:{},subscribers:{}});if(e.id!=null){t=e.id,delete e.id;var r=s.fromJSON(e);return e.id=t,n.deserialized.references[t]=r,(n.deserialized.subscribers[t]||[]).forEach(function(e){e(r)}),r}t=e.$ref;if(n.deserialized.references[t])return n.deserialized.references[t];n.deserialized.subscribers[t]||(n.deserialized.subscribers[t]=[]);var i=new u;return n.deserialized.subscribers[t].push(i.resolve.bind(i)),i})}),e.define("/index.js",function(e,t,n,r,i){t.exports=e("./lib/schema"),e("./lib/patterns/reference"),e("./lib/patterns/nothing"),e("./lib/patterns/anything"),e("./lib/patterns/object"),e("./lib/patterns/or"),e("./lib/patterns/equality"),e("./lib/patterns/regexp"),e("./lib/patterns/class"),e("./lib/patterns/schema"),e("./lib/extensions/Boolean"),e("./lib/extensions/Number"),e("./lib/extensions/String"),e("./lib/extensions/Object"),e("./lib/extensions/Array"),e("./lib/extensions/Function"),e("./lib/extensions/Schema")}),window.schema=e("/index.js")})();